# ------------------------------------------------------------
# Purpose:
#   Automate PALMER runs for multiple long-read sequencing datasets.
#   For each long-read sample, submit SLURM jobs across chromosomes 1â€“22.
#   Each job calls 'palmer.sh' with arguments: (long_read, workdir, chr)
#
# Dependencies:
#   - PALMER executable in working directory
#   - SLURM job scheduler (sbatch command available)
#   - Reference FASTA files in specified paths
# ------------------------------------------------------------

# Path to the directory containing list of long-read datasets
list = ./SMaHt_list_directory/

# Iterate through each long-read dataset in the list
for read in list:
    
    # Define the absolute path to the long-read dataset
    long_read = /SMaHT/long_read_name
    
    # Define a working directory specific to this dataset
    workdir = f"{long_read}_workingdir"
    
    # Loop through human autosomes (chromosomes 1 to 22)
    for i in range(1, 23):
        # Define the chromosome name
        chr = f"chr{i}"
        
        # Submit a PALMER job for this sample and chromosome
        # palmer.sh will receive arguments: input, workdir, chr
        sbatch palmer.sh $long_read $workdir $chr
